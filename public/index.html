<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.2/socket.io.min.js"></script>
    </head>
    <body>
        <button id="step">Step (0)</button>
        <input id="amount" value="1" type="number" />
        <button id="save">Save Current State</button>
        <input id="savename" type="text" placeholder="File name" />
        <script>
            var stepper = document.getElementById('step');
            var stepCount = document.getElementById('amount');
            var saveName = document.getElementById('savename');
            var saveButton = document.getElementById('save');

            var steps = 0;
            var mode = 'manual';

            var socket = io();
            var connected = false;
            socket.on('connected', function (data) {
                console.log(data);
                connected = data;
            });

            stepper.addEventListener('click', function() {
                if (connected) {
                    var amount = parseInt(stepCount.value);
                    socket.emit('cycle', amount);
                }
            });
            saveButton.addEventListener('click', function() {
                if (connected) {
                    socket.emit('save', saveName.value);
                }
            });
            socket.on('cycle', function() {
                steps++;
                stepper.textContent = 'Step (' + steps + ')';
            });
        </script>
    </body>
</html>